%include "config.S"

; memory address offset in segment
MBR_OF_ADDR equ 07c00h
DPT_OF_ADDR equ MBR_OF_ADDR + 01beh ; Dos Partition Table
OBR_OF_ADDR equ MBR_OF_ADDR + CONFIG_HD_SECT_SZ ; OS Boot Block
SUPBLK_OF_ADDR equ OBR_OF_ADDR + CONFIG_EXT2_BS
BG_DESC_OF_ADDR equ SUPBLK_OF_ADDR + CONFIG_EXT2_BS ; BG short for Block Group

MBR_PART_DESC_SIZE equ 16
MBR_PART_COUNT equ 4

PART_DESC_BOOT_OFFSET equ 0
PART_DESC_HEAD_OFFSET equ 1
PART_DESC_SECT_CYLIND_OFFSET equ 2
PART_DESC_TYPE_OFFSET equ 4
PART_DESC_LBA_OFFSET equ 8

EXT2_SECTS_PER_BLK equ CONFIG_EXT2_BS / CONFIG_HD_SECT_SZ

FS_TYPE_EXT2 equ 83h
EXT2_S_OF_BLOCKS_COUNT equ 4
EXT2_S_OF_FIRST_DATA_BLOCK equ 20
EXT2_S_OF_BLOCKS_PER_GROUP equ 32
EXT2_S_OF_INODES_PER_GROUP equ 40
EXT2_S_OF_INO_SIZE equ 88

EXT2_BG_DESC_SIZE equ 32
EXT2_BG_OF_BLOCK_BITMAP equ 0
EXT2_BG_OF_INO_BITMAP equ 4
EXT2_BG_OF_INO_TABLE equ 8

EXT2_I_OF_SIZE equ 4
EXT2_I_OF_BLOCKS equ 40
EXT2_N_BLOCKS equ 15
EXT2_I_BLOCKS_L1_INDEX equ 12

EXT2_DIR_REC_OF_INO equ 0
EXT2_DIR_REC_OF_LEN equ 4
EXT2_DIR_REC_OF_NAME_LEN equ 6
EXT2_DIR_REC_OF_TYPE equ 7
EXT2_DIR_REC_OF_NAME equ 8

EXT_FT_REG_FILE equ 1

EXT2_INO_ROOT equ 2
EXT2_INO_BOOTLOADER equ 5